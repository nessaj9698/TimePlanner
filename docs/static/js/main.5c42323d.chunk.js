(this.webpackJsonpplanner=this.webpackJsonpplanner||[]).push([[0],{100:function(e,t,a){e.exports=a(139)},105:function(e,t,a){},106:function(e,t,a){},139:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),r=a(56),l=a.n(r),s=(a(105),a(106),a(75)),o=a.n(s),u=a(19),i=a(39),m=a(47),d=Object(m.c)({name:"auth",initialState:{isAuth:!1,userName:null,userID:null,currentDay:null,plannedEvents:[],completedEvents:[],allPlannedDates:[],allCompletedDates:[],eventImportance:null,forecast:[]},reducers:{logIn:function(e,t){e.isAuth=!0,e.userName=t.payload},logOut:function(e,t){e.isAuth=!1,e.userName=null},setUserID:function(e,t){e.userID=t.payload},setCurrentDay:function(e,t){e.currentDay=t.payload},fetchPlannedEvents:function(e,t){e.plannedEvents=t.payload},fetchCompletedEvents:function(e,t){e.completedEvents=t.payload},completeEvent:function(e,t){e.completedEvents.push(t.payload)},fetchAllPlannedDates:function(e,t){e.allPlannedDates=t.payload},fetchAllCompletedDates:function(e,t){e.allCompletedDates=t.payload},setEventImportance:function(e,t){e.eventImportance=t.payload},fetchForecast:function(e,t){e.forecast=t.payload}},extraReducers:{}}),p=d.actions,f=p.logIn,v=p.logOut,E=p.setUserID,b=p.setCurrentDay,h=p.fetchPlannedEvents,g=p.fetchCompletedEvents,k=p.fetchAllPlannedDates,O=p.fetchAllCompletedDates,j=p.setEventImportance,y=p.fetchForecast,N=d.reducer,_=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.rootReducer.userName}));return t?c.a.createElement("div",{className:"header"},c.a.createElement("img",{src:o.a,alt:""}),c.a.createElement("div",null,t,c.a.createElement("button",{onClick:function(){i.a.auth().signOut(),e(v())},className:"logout-button"},"\u0412\u044b\u0445\u043e\u0434"))):c.a.createElement("div",{className:"header"},c.a.createElement("img",{src:o.a,alt:""}),c.a.createElement("div",null,t))},D=a(13),I=a(43),R=a.n(I),x=Object(m.a)({reducer:{rootReducer:N}}),w=a(49),C=a.n(w),T=a(12),S=a(0),A=a.n(S),Y=a(3),L=a(92),M=a(32),P=a(10),F=(a(80),{apiKey:"AIzaSyBhU-1JWJ9Qcocnx80L0xs1FALZxt4fneo",authDomain:"timeplanner-4f01a.firebaseapp.com",databaseURL:"https://timeplanner-4f01a-default-rtdb.europe-west1.firebasedatabase.app",projectId:"timeplanner-4f01a",storageBucket:"timeplanner-4f01a.appspot.com",messagingSenderId:"58913837179",appId:"1:58913837179:web:863e05d4d1955638e092de"}),U=(P.a.apps.length?P.a.app():P.a.initializeApp(F),Object(L.a)(F),Object(M.b)()),W=function(e,t,a){return Object(M.d)(U,"users/".concat(e,"/").concat(a,"/").concat(t))},B=Object(m.b)("events/fetch",function(){var e=Object(Y.a)(A.a.mark((function e(t,a){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.dispatch;case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),J=function(e,t,a,n,c){Object(M.e)(Object(M.d)(U,"users/".concat(e,"/").concat(t,"/").concat(a,"/").concat(n))).then((function(){q(e,a,"planned",c),q(e,a,"completed",c),V(e,c),console.log("deleted")}))},q=function(e,t,a,n){"planned"===a?Object(M.a)(W(e,t,a)).then((function(e){var t=[];for(var a in e.val())t.push(e.val()[a].task);n(h(e.val()))})):"completed"===a&&Object(M.a)(W(e,t,a)).then((function(e){n(g(e.val()))}))},V=function(e,t){Object(M.a)(Object(M.d)(U,"users/".concat(e,"/planned"))).then((function(e){var a=[];for(var n in e.val())a=[].concat(Object(T.a)(a),[n]);t(k(a))})),Object(M.a)(Object(M.d)(U,"users/".concat(e,"/completed"))).then((function(e){var a=[];for(var n in e.val())a=[].concat(Object(T.a)(a),[n]);t(O(a))}))},K=function(e,t,a,n,c,r){Object(M.c)(W(e,t,a),{task:c,importance:r}),q(e,t,a,n),V(e,n)},z=a(158),G=a(159),Q=a(160),Z=a(157),H=function(e){return c.a.createElement(z.a,{component:"form",className:"importances",required:!0,events:e.events},c.a.createElement(G.a,{row:!0,name:"radio-buttons-group",onChange:e.onChange,events:e.events},c.a.createElement(Q.a,{value:"\u041c\u0430\u043b\u043e\u0432\u0430\u0436\u043d\u043e",control:c.a.createElement(Z.a,{events:e.events}),label:"\u041c\u0430\u043b\u043e\u0432\u0430\u0436\u043d\u043e"}),c.a.createElement(Q.a,{value:"\u0412\u0430\u0436\u043d\u043e",control:c.a.createElement(Z.a,{events:e.events}),label:"\u0412\u0430\u0436\u043d\u043e"}),c.a.createElement(Q.a,{value:"\u041e\u0447\u0435\u043d\u044c \u0432\u0430\u0436\u043d\u043e",control:c.a.createElement(Z.a,{events:e.events}),label:"\u041e\u0447\u0435\u043d\u044c \u0432\u0430\u0436\u043d\u043e"})))},X=a(77),$=function(e){var t=Object(X.b)({mode:"onBlur"}),a=t.control,n=t.register,r=t.formState.errors,l=t.handleSubmit,s=t.reset,o=Object(u.c)((function(e){return e.rootReducer.userID})),i=Object(u.c)((function(e){return e.rootReducer.currentDay})),m=Object(u.c)((function(e){return e.rootReducer.plannedEvents})),d=Object(u.b)();return c.a.createElement("div",null,c.a.createElement("form",{action:"",onSubmit:l((function(t){var a=JSON.stringify(t.task).replace(/"/g,""),n=JSON.stringify(t.buttons).replace(/"/g,"");K(o,i,"planned",d,a,n),s(),e.addTaskActive(!1),e.addTaskActive(!0)}))},c.a.createElement("input",Object.assign({type:"text",className:C.a.taskInput},n("task",{required:"\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435",minLength:{value:3,message:"\u041c\u0438\u043d\u0438\u043c\u0443\u043c 3 \u0441\u0438\u043c\u0432\u043e\u043b\u0430"},maxLength:{value:55,message:"\u041c\u0430\u043a\u0441\u0438\u043c\u0443\u043c 55 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"},validate:{duplicate:function(e){for(var t in m)return m[t].task!=e||"\u0417\u0430\u0434\u0430\u0447\u0430 \u0443\u0436\u0435 \u0437\u0430\u043f\u043b\u0430\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0430"}}}))),(null===r||void 0===r?void 0:r.task)&&c.a.createElement("p",{className:C.a.formWarning},r.task.message),c.a.createElement(X.a,{control:a,name:"buttons",defaultValue:"",rules:{required:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u0442\u0435\u043f\u0435\u043d\u044c \u0432\u0430\u0436\u043d\u043e\u0441\u0442\u0438"},render:function(t){var a=t.field,n=a.onChange,r=a.onBlur,l=a.value,s=(a.name,a.ref),o=t.fieldState;o.invalid,o.isTouched,o.isDirty,o.error,t.formState;return c.a.createElement(H,{onBlur:r,onChange:n,checked:l,inputRef:s,events:e.events})}}),(null===r||void 0===r?void 0:r.buttons)&&c.a.createElement("p",{className:C.a.formWarning},r.buttons.message),c.a.createElement("div",null),c.a.createElement("input",{type:"submit",value:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c",className:C.a.add}),c.a.createElement("button",{className:C.a.remove,onClick:function(){e.addTaskActive(!1),d(j(null))}},"\u041e\u0442\u043c\u0435\u043d\u0430")))},ee=a(76),te=a.n(ee),ae=function(e){te.a.get("https://ipapi.co/json/").then((function(t){var a=t.data.city;te.a.get("https://api.openweathermap.org/data/2.5/forecast?q=".concat(a,"&units=metric&lang=Ru&appid=3dcf5fc3a4c113457010db72f93c7ad5")).then((function(t){for(var a=t.data.list,n=[],c=0;c<a.length;c++)n.push({date:{fullDate:a[c].dt_txt.split(" ")[0].split("-").reverse().join("-"),time:a[c].dt_txt.split(" ")[1].split(":")[0]},temperature:Math.round(a[c].main.temp),icon:a[c].weather[0].icon});e(y(n))}))}))};var ne=function(e,t){var a=(e=Math.abs(e)%100)%10;return e>10&&e<20?t[2]:a>1&&a<5?t[1]:1==a?t[0]:t[2]},ce=function(){var e=Object(u.b)(),t=Object(n.useState)(!1),a=Object(D.a)(t,2),r=a[0],l=a[1],s=Object(n.useState)(0),o=Object(D.a)(s,2),i=o[0],m=o[1],d=Object(u.c)((function(e){return e.rootReducer.currentDay})),p=Object(u.c)((function(e){return e.rootReducer.plannedEvents})),f=Object(u.c)((function(e){return e.rootReducer.forecast})),v=[];return Object(n.useEffect)((function(){ae(e)}),[]),Object(n.useEffect)((function(){var e=x.getState().rootReducer.plannedEvents,t=[];for(var a in e)t.push(a),v.push(e[a].task);m(t.length)}),[p]),c.a.createElement("div",{className:R.a.contentTitle},c.a.createElement("div",{className:"today flex"},c.a.createElement("span",{style:{marginRight:"20px"},className:"today-date"},d),c.a.createElement("div",{className:"weather flex"},f.map((function(e){return e.date.fullDate==d&&c.a.createElement("div",{className:"weatherItem",key:e.date.time},c.a.createElement("div",{className:"weatherTime"},e.date.time),c.a.createElement("img",{src:"http://openweathermap.org/img/wn/".concat(e.icon,"@2x.png"),alt:""}),c.a.createElement("div",{className:"weatherTemperature"},e.temperature))})))),c.a.createElement("div",{className:"content-title"},c.a.createElement("span",{className:R.a.black},"\u0423 \u0432\u0430\u0441 "),c.a.createElement("span",{className:R.a.pink},i," ",ne(i,["\u0437\u0430\u0434\u0430\u0447\u0430","\u0437\u0430\u0434\u0430\u0447\u0438","\u0437\u0430\u0434\u0430\u0447"])," "),c.a.createElement("span",{className:R.a.black},"\u043d\u0430 \u044d\u0442\u043e\u0442 \u0434\u0435\u043d\u044c")),c.a.createElement("div",{className:"add-task-wrapper"},r?" ":c.a.createElement("button",{className:"addTask",onClick:function(){l(!0)}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0437\u0430\u0434\u0430\u0447\u0443")),!!r&&c.a.createElement($,{addTaskActive:l,events:v}))},re=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.rootReducer.userID})),a=Object(u.c)((function(e){return e.rootReducer.currentDay}));Object(n.useEffect)((function(){q(t,a,"completed",e)}),[t,a]);var r=Object(u.c)((function(e){return e.rootReducer.completedEvents})),l=[];for(var s in r)l.push({taskID:s,taskText:r[s].task,taskImportance:r[s].importance});return c.a.createElement("div",{className:"completedTasksList"},c.a.createElement("div",{className:"completedTasks"},r?"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043d\u044b\u0435 \u0437\u0430\u0434\u0430\u0447\u0438":""),l.map((function(n){return c.a.createElement("div",{className:"task",key:n.taskText},c.a.createElement("span",{className:"taskText"},n.taskText),c.a.createElement("span",{className:"importance"},n.taskImportance),c.a.createElement("span",{className:"deleteTrigger",onClick:function(){J(t,"completed",a,n.taskID,e)}},"x"))})))},le=function(){var e=[],t=Object(u.b)(),a=Object(u.c)((function(e){return e.rootReducer.plannedEvents})),r=Object(u.c)((function(e){return e.rootReducer.userID})),l=Object(u.c)((function(e){return e.rootReducer.currentDay})),s=Object(u.c)((function(e){return e.rootReducer.eventImportance}));for(var o in Object(n.useEffect)((function(){q(r,l,"planned",t)}),[r,l]),a)e.push({taskID:o,taskText:a[o].task,taskImportance:a[o].importance});return c.a.createElement("div",{className:"holdedTasksList"},e.map((function(e){return c.a.createElement("div",{className:"task",key:e.taskID},c.a.createElement("span",{className:"taskText"},e.taskText),c.a.createElement("span",{className:"importance"},e.taskImportance),c.a.createElement("div",{className:"task-controls"},c.a.createElement("span",{className:"completeTrigger",onClick:function(){return function(e,t,a,n,c,r){Object(M.e)(Object(M.d)(U,"users/".concat(e,"/planned/").concat(t,"/").concat(a))).then((function(a){Object(M.c)(W(e,t,"completed"),{task:n,importance:c}),q(e,t,"planned",r),q(e,t,"completed",r),V(e,r)}))}(r,l,e.taskID,e.taskText,s,t)}},c.a.createElement("img",{src:"https://img.icons8.com/ios-filled/10/000000/checkmark--v1.png"})),c.a.createElement("span",{className:"deleteTrigger",onClick:function(){J(r,"planned",l,e.taskID,t)}},"x")))})))},se=a(93),oe=a.n(se),ue=function(){var e=Object(u.c)((function(e){return e.rootReducer.plannedEvents})),t=Object(u.c)((function(e){return e.rootReducer.completedEvents}));return c.a.createElement("div",null,!!(!e&!t)&&c.a.createElement("div",{className:"svg-wrapper"},c.a.createElement("img",{src:oe.a,className:"svg"}),c.a.createElement("p",null,"\u041d\u0430 \u044d\u0442\u043e\u0442 \u0434\u0435\u043d\u044c \u0437\u0430\u0434\u0430\u0447 \u043d\u0435 \u0437\u0430\u043f\u043b\u0430\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u043e")),c.a.createElement(le,null),c.a.createElement(re,null))},ie=a(94),me=a.n(ie),de=(a(90),{signInFlow:"popup",callbacks:{signInSuccessWithAuthResult:function(){return!1}},signInOptions:[P.a.auth.EmailAuthProvider.PROVIDER_ID]});var pe=function(){var e=Object(u.b)(),t=(new Date).toLocaleDateString().replace(/\./g,"-");return Object(n.useEffect)((function(){return P.a.auth().onAuthStateChanged((function(a){var n=P.a.auth().currentUser;n&&(e(f(a.displayName)),e(E(n.uid)),e(b(t)),V(n.uid,e))}))})),c.a.createElement("div",null,c.a.createElement("p",null,"Please sign-in:"),c.a.createElement(me.a,{uiConfig:de,firebaseAuth:P.a.auth()}))},fe=a(65),ve=a.n(fe),Ee=(a(138),a(37)),be=a.n(Ee);function he(e){var t=e.value,a=e.setValue;return c.a.createElement("div",{className:be.a.header},c.a.createElement("div",{className:be.a.previous,onClick:function(){return a(t.clone().subtract(1,"month"))}},String.fromCharCode(171)),c.a.createElement("div",{className:be.a.current},t.format("MMMM")," ",t.format("YYYY")),c.a.createElement("div",{className:be.a.next,onClick:function(){return a(t.clone().add(1,"month"))}},String.fromCharCode(187)))}function ge(){var e=Object(u.b)();ve.a.updateLocale("ru",{week:{dow:1}});var t=Object(n.useState)(ve()()),a=Object(D.a)(t,2),r=a[0],l=a[1],s=Object(n.useState)([]),o=Object(D.a)(s,2),i=o[0],m=o[1],d=Object(u.c)((function(e){return e.rootReducer.currentUser})),p=Object(u.c)((function(e){return e.rootReducer.allPlannedDates})),f=Object(u.c)((function(e){return e.rootReducer.allCompletedDates}));return Object(n.useEffect)((function(){m(function(e){for(var t=e.clone().startOf("month").startOf("week"),a=e.clone().endOf("month").endOf("week"),n=t.clone().subtract(1,"day"),c=[];n.isBefore(a,"day");)c.push(Array(7).fill(0).map((function(){return n.add(1,"day").clone()})));return c}(r))}),[r]),Object(n.useEffect)((function(){B(d)}),[d]),c.a.createElement("div",{className:be.a.calendar},c.a.createElement(he,{value:r,setValue:l}),c.a.createElement("div",{className:be.a.dayNames},["\u041f\u043d","\u0412\u0442","\u0421\u0440","\u0427\u0442","\u041f\u0442","\u0421\u0431","\u0412\u0441"].map((function(e){return c.a.createElement("div",{key:e},e)}))),c.a.createElement("div",{className:be.a.body},i.map((function(t){return c.a.createElement("div",{className:be.a.calendarRow,key:t},t.map((function(t){return c.a.createElement("div",{className:!0===p.includes(t.format("DD-MM-YYYY"))?"".concat(be.a.planned):!0===f.includes(t.format("DD-MM-YYYY"))?"".concat(be.a.completed):"day",onClick:function(){l(t),e(b(t.format("DD-MM-YYYY")))},key:t},c.a.createElement("div",{className:r.isSame(t,"day")?be.a.selected:""},t.format("D")))})))}))))}var ke=function(){return c.a.createElement("div",null,c.a.createElement(ge,null))},Oe=function(){return Object(u.c)((function(e){return e.rootReducer.isAuth}))?c.a.createElement("div",{className:"content"},c.a.createElement("div",{className:"todos"},c.a.createElement(ce,null),c.a.createElement(ue,null)),c.a.createElement("div",{className:"sidebar"},c.a.createElement(ke,null))):c.a.createElement("div",{className:R.a.login},c.a.createElement(pe,null))},je=function(){return c.a.createElement("div",{className:"container"},c.a.createElement(_,null),c.a.createElement(Oe,null))};var ye=function(){return c.a.createElement("div",{className:"App"},c.a.createElement("script",{src:"https://api-maps.yandex.ru/2.1/?apikey=59611a2e-87ee-45d1-840b-75810a5e5772\r\n&lang=ru_RU",type:"text/javascript"}),c.a.createElement("style",null,"@import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;700&display=swap');"),c.a.createElement(je,{store:x}))},Ne=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,162)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,r=t.getLCP,l=t.getTTFB;a(e),n(e),c(e),r(e),l(e)}))};var _e=function(){"serviceWorker"in navigator?window.addEventListener("load",(function(){navigator.serviceWorker.register("service-worker.js").then((function(e){console.log("ServiceWorker registration successful with scope: ",e.scope)}),(function(e){console.log("ServiceWorker registration failed: ",e)})).catch((function(e){console.log(e)}))})):console.log("service worker is not supported")};l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(u.a,{store:x},c.a.createElement(ye,null))),document.getElementById("root")),_e(),Ne()},37:function(e,t,a){e.exports={calendar:"styles_calendar__1Uk8k",calendarRow:"styles_calendarRow__3Ic1K",completed:"styles_completed__2BiLn",planned:"styles_planned__2F8pY",selected:"styles_selected__diET2",header:"styles_header__3mLl0",dayNames:"styles_dayNames__22ASs",next:"styles_next__34Tk-",previous:"styles_previous__1PGIt"}},43:function(e,t,a){e.exports={black:"content_black__R7pbF",pink:"content_pink__1tnUf",contentTitle:"content_contentTitle__2lCR8",login:"content_login__1I-U6"}},49:function(e,t,a){e.exports={add:"tasks_add__uKS1Y",remove:"tasks_remove__3YAhx",taskInput:"tasks_taskInput__2tLgL",formWarning:"tasks_formWarning__22qhd"}},75:function(e,t,a){e.exports=a.p+"static/media/logo.43889160.svg"},93:function(e,t,a){e.exports=a.p+"static/media/4-04.dff83f42.svg"}},[[100,1,2]]]);
//# sourceMappingURL=main.5c42323d.chunk.js.map